[WARNING]: Found both group and host with same name: admin
[WARNING]: Found both group and host with same name: master
No config file found; using defaults

PLAY [Setup Jenkins service account on Kubernetes] *****************************

TASK [Gathering Facts] *********************************************************
[WARNING]: Platform linux on host master is using the discovered Python
interpreter at /usr/bin/python3.9, but future installation of another Python
interpreter could change the meaning of that path. See
https://docs.ansible.com/ansible-
core/2.15/reference_appendices/interpreter_discovery.html for more information.
ok: [master]

TASK [Get private IP using curl] ***********************************************
changed: [master] => {"changed": true, "cmd": ["curl", "-s", "http://169.254.169.254/latest/meta-data/local-ipv4"], "delta": "0:00:00.009115", "end": "2024-07-24 13:46:59.299968", "msg": "", "rc": 0, "start": "2024-07-24 13:46:59.290853", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}

TASK [Set master private IP fact] **********************************************
ok: [master] => {"ansible_facts": {"master_private_ip": ""}, "changed": false}

TASK [Print private IP] ********************************************************
ok: [master] => {
    "msg": "The private IP of the target server is: 10.0.1.184"
}

TASK [Set KUBECONFIG environment variable] *************************************
ok: [master] => {"ansible_facts": {"kubeconfig_path": "/etc/kubernetes/admin.conf"}, "changed": false}

TASK [Remove existing Jenkins service account] *********************************
fatal: [master]: FAILED! => {"changed": true, "cmd": ["kubectl", "delete", "serviceaccount", "jenkins", "-n", "default"], "delta": "0:00:00.194940", "end": "2024-07-24 13:47:00.141761", "msg": "non-zero return code", "rc": 1, "start": "2024-07-24 13:46:59.946821", "stderr": "Error from server (NotFound): serviceaccounts \"jenkins\" not found", "stderr_lines": ["Error from server (NotFound): serviceaccounts \"jenkins\" not found"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [Remove existing Jenkins cluster role binding] ****************************
fatal: [master]: FAILED! => {"changed": true, "cmd": ["kubectl", "delete", "clusterrolebinding", "jenkins"], "delta": "0:00:00.079081", "end": "2024-07-24 13:47:00.942615", "msg": "non-zero return code", "rc": 1, "start": "2024-07-24 13:47:00.863534", "stderr": "Error from server (NotFound): clusterrolebindings.rbac.authorization.k8s.io \"jenkins\" not found", "stderr_lines": ["Error from server (NotFound): clusterrolebindings.rbac.authorization.k8s.io \"jenkins\" not found"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [Remove existing Jenkins secret] ******************************************
fatal: [master]: FAILED! => {"changed": true, "cmd": ["kubectl", "delete", "secret", "jenkins-secret", "-n", "default"], "delta": "0:00:00.115928", "end": "2024-07-24 13:47:01.847515", "msg": "non-zero return code", "rc": 1, "start": "2024-07-24 13:47:01.731587", "stderr": "Error from server (NotFound): secrets \"jenkins-secret\" not found", "stderr_lines": ["Error from server (NotFound): secrets \"jenkins-secret\" not found"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [Remove existing kubeconfig file for Jenkins] *****************************
ok: [master] => {"changed": false, "path": "/tmp/kubeconfig-jenkins.yaml", "state": "absent"}

TASK [Create service account for Jenkins] **************************************
changed: [master] => {"changed": true, "cmd": ["kubectl", "create", "serviceaccount", "jenkins", "-n", "default"], "delta": "0:00:00.069435", "end": "2024-07-24 13:47:03.559191", "msg": "", "rc": 0, "start": "2024-07-24 13:47:03.489756", "stderr": "", "stderr_lines": [], "stdout": "serviceaccount/jenkins created", "stdout_lines": ["serviceaccount/jenkins created"]}

TASK [Create cluster role binding for Jenkins] *********************************
changed: [master] => {"changed": true, "cmd": ["kubectl", "create", "clusterrolebinding", "jenkins", "--clusterrole=cluster-admin", "--serviceaccount=default:jenkins"], "delta": "0:00:00.204519", "end": "2024-07-24 13:47:04.668142", "msg": "", "rc": 0, "start": "2024-07-24 13:47:04.463623", "stderr": "", "stderr_lines": [], "stdout": "clusterrolebinding.rbac.authorization.k8s.io/jenkins created", "stdout_lines": ["clusterrolebinding.rbac.authorization.k8s.io/jenkins created"]}

TASK [Get Jenkins token] *******************************************************
changed: [master] => {"changed": true, "cmd": ["kubectl", "create", "token", "jenkins", "-n", "default", "--duration=24h"], "delta": "0:00:00.124209", "end": "2024-07-24 13:47:05.648653", "msg": "", "rc": 0, "start": "2024-07-24 13:47:05.524444", "stderr": "", "stderr_lines": [], "stdout": "eyJhbGciOiJSUzI1NiIsImtpZCI6Il9pRzc1c1NLTHg2U3VNYUJhQVAzaWRKQ3RIRGFYdGJrSDFqZER5LTZzNFUifQ.eyJhdWQiOlsiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwiXSwiZXhwIjoxNzIxOTE1MjI1LCJpYXQiOjE3MjE4Mjg4MjUsImlzcyI6Imh0dHBzOi8va3ViZXJuZXRlcy5kZWZhdWx0LnN2Yy5jbHVzdGVyLmxvY2FsIiwianRpIjoiMTFmNjA4ZTgtOTk4NC00YTM4LWFjMjgtYzdlZjgyYzU1Njg1Iiwia3ViZXJuZXRlcy5pbyI6eyJuYW1lc3BhY2UiOiJkZWZhdWx0Iiwic2VydmljZWFjY291bnQiOnsibmFtZSI6ImplbmtpbnMiLCJ1aWQiOiJlYzhjYjM4MC02N2NhLTQzOTktOTc0Zi03YmY2NjA3ODZjYjAifX0sIm5iZiI6MTcyMTgyODgyNSwic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50OmRlZmF1bHQ6amVua2lucyJ9.HqYAYnbq3wLxR_dvinqLQk6GrB_9w0d4Ye8eFKxzy45uhyMPVv3kUvy-kJ5Gpmtl4bsMQBQQhpInT5wtRuFrdXqEFD8KJUw19NE1vLeTobKoLRMbemFQvtgbnNJAy8QrUH3MyERoiYDz4SEq3d0vZhc4iVBRilbDMWu5cNjg5KwWVh8WWzuSx2cnK58xmqyP6Wi0u478ETZ8W7jwiLJ4KvhppAh0FHpep0HoLoeTdqsNGkXiGmG1q1V1Q2M3d96NBGZ-vJ4l1U9p-rqUq6CYcRUpPWYjYM_7ufw0W6ZbOUlSvZB_LKnwb7B30a0U4SVg7ejKJZaex6KUW_pEUHVI0g", "stdout_lines": ["eyJhbGciOiJSUzI1NiIsImtpZCI6Il9pRzc1c1NLTHg2U3VNYUJhQVAzaWRKQ3RIRGFYdGJrSDFqZER5LTZzNFUifQ.eyJhdWQiOlsiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwiXSwiZXhwIjoxNzIxOTE1MjI1LCJpYXQiOjE3MjE4Mjg4MjUsImlzcyI6Imh0dHBzOi8va3ViZXJuZXRlcy5kZWZhdWx0LnN2Yy5jbHVzdGVyLmxvY2FsIiwianRpIjoiMTFmNjA4ZTgtOTk4NC00YTM4LWFjMjgtYzdlZjgyYzU1Njg1Iiwia3ViZXJuZXRlcy5pbyI6eyJuYW1lc3BhY2UiOiJkZWZhdWx0Iiwic2VydmljZWFjY291bnQiOnsibmFtZSI6ImplbmtpbnMiLCJ1aWQiOiJlYzhjYjM4MC02N2NhLTQzOTktOTc0Zi03YmY2NjA3ODZjYjAifX0sIm5iZiI6MTcyMTgyODgyNSwic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50OmRlZmF1bHQ6amVua2lucyJ9.HqYAYnbq3wLxR_dvinqLQk6GrB_9w0d4Ye8eFKxzy45uhyMPVv3kUvy-kJ5Gpmtl4bsMQBQQhpInT5wtRuFrdXqEFD8KJUw19NE1vLeTobKoLRMbemFQvtgbnNJAy8QrUH3MyERoiYDz4SEq3d0vZhc4iVBRilbDMWu5cNjg5KwWVh8WWzuSx2cnK58xmqyP6Wi0u478ETZ8W7jwiLJ4KvhppAh0FHpep0HoLoeTdqsNGkXiGmG1q1V1Q2M3d96NBGZ-vJ4l1U9p-rqUq6CYcRUpPWYjYM_7ufw0W6ZbOUlSvZB_LKnwb7B30a0U4SVg7ejKJZaex6KUW_pEUHVI0g"]}

TASK [Create secret for Jenkins token] *****************************************
changed: [master] => {"changed": true, "cmd": ["kubectl", "create", "secret", "generic", "jenkins-secret", "--namespace", "default", "--from-literal=token=eyJhbGciOiJSUzI1NiIsImtpZCI6Il9pRzc1c1NLTHg2U3VNYUJhQVAzaWRKQ3RIRGFYdGJrSDFqZER5LTZzNFUifQ.eyJhdWQiOlsiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwiXSwiZXhwIjoxNzIxOTE1MjI1LCJpYXQiOjE3MjE4Mjg4MjUsImlzcyI6Imh0dHBzOi8va3ViZXJuZXRlcy5kZWZhdWx0LnN2Yy5jbHVzdGVyLmxvY2FsIiwianRpIjoiMTFmNjA4ZTgtOTk4NC00YTM4LWFjMjgtYzdlZjgyYzU1Njg1Iiwia3ViZXJuZXRlcy5pbyI6eyJuYW1lc3BhY2UiOiJkZWZhdWx0Iiwic2VydmljZWFjY291bnQiOnsibmFtZSI6ImplbmtpbnMiLCJ1aWQiOiJlYzhjYjM4MC02N2NhLTQzOTktOTc0Zi03YmY2NjA3ODZjYjAifX0sIm5iZiI6MTcyMTgyODgyNSwic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50OmRlZmF1bHQ6amVua2lucyJ9.HqYAYnbq3wLxR_dvinqLQk6GrB_9w0d4Ye8eFKxzy45uhyMPVv3kUvy-kJ5Gpmtl4bsMQBQQhpInT5wtRuFrdXqEFD8KJUw19NE1vLeTobKoLRMbemFQvtgbnNJAy8QrUH3MyERoiYDz4SEq3d0vZhc4iVBRilbDMWu5cNjg5KwWVh8WWzuSx2cnK58xmqyP6Wi0u478ETZ8W7jwiLJ4KvhppAh0FHpep0HoLoeTdqsNGkXiGmG1q1V1Q2M3d96NBGZ-vJ4l1U9p-rqUq6CYcRUpPWYjYM_7ufw0W6ZbOUlSvZB_LKnwb7B30a0U4SVg7ejKJZaex6KUW_pEUHVI0g", "--from-file=ca.crt=/etc/kubernetes/pki/ca.crt"], "delta": "0:00:00.076480", "end": "2024-07-24 13:47:06.533050", "msg": "", "rc": 0, "start": "2024-07-24 13:47:06.456570", "stderr": "", "stderr_lines": [], "stdout": "secret/jenkins-secret created", "stdout_lines": ["secret/jenkins-secret created"]}

TASK [Patch service account with secret] ***************************************
changed: [master] => {"changed": true, "cmd": "kubectl patch serviceaccount jenkins -n default -p '{\"secrets\": [{\"name\": \"jenkins-secret\"}]}'\n", "delta": "0:00:00.086187", "end": "2024-07-24 13:47:07.180840", "msg": "", "rc": 0, "start": "2024-07-24 13:47:07.094653", "stderr": "", "stderr_lines": [], "stdout": "serviceaccount/jenkins patched", "stdout_lines": ["serviceaccount/jenkins patched"]}

TASK [Retrieve certificate-authority-data] *************************************
changed: [master] => {"changed": true, "cmd": ["kubectl", "get", "secret", "jenkins-secret", "-n", "default", "-o", "jsonpath={.data['ca\\.crt']}"], "delta": "0:00:00.101489", "end": "2024-07-24 13:47:07.962087", "msg": "", "rc": 0, "start": "2024-07-24 13:47:07.860598", "stderr": "", "stderr_lines": [], "stdout": "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURCVENDQWUyZ0F3SUJBZ0lJSVMzRXlCTjNhT293RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TkRBM01qUXhNelF4TXpKYUZ3MHpOREEzTWpJeE16UTJNekphTUJVeApFekFSQmdOVkJBTVRDbXQxWW1WeWJtVjBaWE13Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLCkFvSUJBUUNqNmlqSnh1SUtKVUloSXJjSVFrNkRHaEs3dEllVGlpaTBMTFBzd2JlaXUxdk93MENFejlCSXFwUHEKMk0yZlBkWVdaK083UWw4QTlTZ1JZVytaWHVUNk5iOXNhQmZBQlpwNlNweWZPbGV0QVc0MUpkbnlLajBXZzQ3bgp5b01TY2s1MXRRT053eWt5V3F1d0ZwdHc1UWVHQkZWc1BQQlRINXhPYm9BN3dmWFlyeG91NEFQWFp1bGgvNzAzClc4dmFTaW8xMi9ESkdpbXh5ZzVKNGZLUFJHMGhYSU9YY3pqbm9tS2pYZEpaNXNwaEg2YUpmdDFlbWJ6K1NHeUgKeVlvQ1dQMzRWdGQ4b0FVQndBbFpvU242SjRsYXhTVFNaN3F5QlJuVWQwVHpuUW5ZUS9oL3FnaEpGY1pDMDJCego0bkNQZG1oYzI3Wk1WdWhiUWxpUFhhczJzOXo3QWdNQkFBR2pXVEJYTUE0R0ExVWREd0VCL3dRRUF3SUNwREFQCkJnTlZIUk1CQWY4RUJUQURBUUgvTUIwR0ExVWREZ1FXQkJRdFdUS1l4UUhaWEFzNkYva2pZbm1kVlAzQmpUQVYKQmdOVkhSRUVEakFNZ2dwcmRXSmxjbTVsZEdWek1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQ0xVUmsyZHd6egp1OTYvNUFoR2V1OVFmQnI4SVQ2ckNHUy9CV0UxNXRRWWpVVGZkWE5sMG5JUUF5bmtHVytvWnJsQnozWlNqalAyClVuQVEzYUR5aTF4TGUyY2tzT1EwVEYwSy9iZ1B6SGNLU1hKYk5ySC9NZ3ZZUytnYnRmYm9Pd2dzYmZtV1MrenYKak1XTkp6V2pFN2xISnFaL1hGcE5GcFJLc3pTVGpyQytJaHowSXlXMkhUOFAzbzcxZHFBcVVROFVjNWh2TjZXcwpoM3JnSU5UTnhibjNyVzhUeVZpTi8wcTZlQVUvN3Nvc1RHNFh0aW8va0YyT29DNFA2Z0tjMXhWazJvbnQwWW8vCnU1ZFkyWGs4TFJ0cC9ON28yTkRKZStKeERjcWsvMkhrTzk5S0Uza0NzQWp3cTQ1TGg2SUYwN0JRYlU3bStvRTUKTnBJeFpkZmJhYWp0Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K", "stdout_lines": ["LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURCVENDQWUyZ0F3SUJBZ0lJSVMzRXlCTjNhT293RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TkRBM01qUXhNelF4TXpKYUZ3MHpOREEzTWpJeE16UTJNekphTUJVeApFekFSQmdOVkJBTVRDbXQxWW1WeWJtVjBaWE13Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLCkFvSUJBUUNqNmlqSnh1SUtKVUloSXJjSVFrNkRHaEs3dEllVGlpaTBMTFBzd2JlaXUxdk93MENFejlCSXFwUHEKMk0yZlBkWVdaK083UWw4QTlTZ1JZVytaWHVUNk5iOXNhQmZBQlpwNlNweWZPbGV0QVc0MUpkbnlLajBXZzQ3bgp5b01TY2s1MXRRT053eWt5V3F1d0ZwdHc1UWVHQkZWc1BQQlRINXhPYm9BN3dmWFlyeG91NEFQWFp1bGgvNzAzClc4dmFTaW8xMi9ESkdpbXh5ZzVKNGZLUFJHMGhYSU9YY3pqbm9tS2pYZEpaNXNwaEg2YUpmdDFlbWJ6K1NHeUgKeVlvQ1dQMzRWdGQ4b0FVQndBbFpvU242SjRsYXhTVFNaN3F5QlJuVWQwVHpuUW5ZUS9oL3FnaEpGY1pDMDJCego0bkNQZG1oYzI3Wk1WdWhiUWxpUFhhczJzOXo3QWdNQkFBR2pXVEJYTUE0R0ExVWREd0VCL3dRRUF3SUNwREFQCkJnTlZIUk1CQWY4RUJUQURBUUgvTUIwR0ExVWREZ1FXQkJRdFdUS1l4UUhaWEFzNkYva2pZbm1kVlAzQmpUQVYKQmdOVkhSRUVEakFNZ2dwcmRXSmxjbTVsZEdWek1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQ0xVUmsyZHd6egp1OTYvNUFoR2V1OVFmQnI4SVQ2ckNHUy9CV0UxNXRRWWpVVGZkWE5sMG5JUUF5bmtHVytvWnJsQnozWlNqalAyClVuQVEzYUR5aTF4TGUyY2tzT1EwVEYwSy9iZ1B6SGNLU1hKYk5ySC9NZ3ZZUytnYnRmYm9Pd2dzYmZtV1MrenYKak1XTkp6V2pFN2xISnFaL1hGcE5GcFJLc3pTVGpyQytJaHowSXlXMkhUOFAzbzcxZHFBcVVROFVjNWh2TjZXcwpoM3JnSU5UTnhibjNyVzhUeVZpTi8wcTZlQVUvN3Nvc1RHNFh0aW8va0YyT29DNFA2Z0tjMXhWazJvbnQwWW8vCnU1ZFkyWGs4TFJ0cC9ON28yTkRKZStKeERjcWsvMkhrTzk5S0Uza0NzQWp3cTQ1TGg2SUYwN0JRYlU3bStvRTUKTnBJeFpkZmJhYWp0Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K"]}

TASK [Create kubeconfig file for Jenkins] **************************************
changed: [master] => {"changed": true, "cmd": "cat <<EOF > /tmp/kubeconfig-jenkins.yaml\napiVersion: v1\nkind: Config\nclusters:\n- cluster:\n    certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURCVENDQWUyZ0F3SUJBZ0lJSVMzRXlCTjNhT293RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TkRBM01qUXhNelF4TXpKYUZ3MHpOREEzTWpJeE16UTJNekphTUJVeApFekFSQmdOVkJBTVRDbXQxWW1WeWJtVjBaWE13Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLCkFvSUJBUUNqNmlqSnh1SUtKVUloSXJjSVFrNkRHaEs3dEllVGlpaTBMTFBzd2JlaXUxdk93MENFejlCSXFwUHEKMk0yZlBkWVdaK083UWw4QTlTZ1JZVytaWHVUNk5iOXNhQmZBQlpwNlNweWZPbGV0QVc0MUpkbnlLajBXZzQ3bgp5b01TY2s1MXRRT053eWt5V3F1d0ZwdHc1UWVHQkZWc1BQQlRINXhPYm9BN3dmWFlyeG91NEFQWFp1bGgvNzAzClc4dmFTaW8xMi9ESkdpbXh5ZzVKNGZLUFJHMGhYSU9YY3pqbm9tS2pYZEpaNXNwaEg2YUpmdDFlbWJ6K1NHeUgKeVlvQ1dQMzRWdGQ4b0FVQndBbFpvU242SjRsYXhTVFNaN3F5QlJuVWQwVHpuUW5ZUS9oL3FnaEpGY1pDMDJCego0bkNQZG1oYzI3Wk1WdWhiUWxpUFhhczJzOXo3QWdNQkFBR2pXVEJYTUE0R0ExVWREd0VCL3dRRUF3SUNwREFQCkJnTlZIUk1CQWY4RUJUQURBUUgvTUIwR0ExVWREZ1FXQkJRdFdUS1l4UUhaWEFzNkYva2pZbm1kVlAzQmpUQVYKQmdOVkhSRUVEakFNZ2dwcmRXSmxjbTVsZEdWek1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQ0xVUmsyZHd6egp1OTYvNUFoR2V1OVFmQnI4SVQ2ckNHUy9CV0UxNXRRWWpVVGZkWE5sMG5JUUF5bmtHVytvWnJsQnozWlNqalAyClVuQVEzYUR5aTF4TGUyY2tzT1EwVEYwSy9iZ1B6SGNLU1hKYk5ySC9NZ3ZZUytnYnRmYm9Pd2dzYmZtV1MrenYKak1XTkp6V2pFN2xISnFaL1hGcE5GcFJLc3pTVGpyQytJaHowSXlXMkhUOFAzbzcxZHFBcVVROFVjNWh2TjZXcwpoM3JnSU5UTnhibjNyVzhUeVZpTi8wcTZlQVUvN3Nvc1RHNFh0aW8va0YyT29DNFA2Z0tjMXhWazJvbnQwWW8vCnU1ZFkyWGs4TFJ0cC9ON28yTkRKZStKeERjcWsvMkhrTzk5S0Uza0NzQWp3cTQ1TGg2SUYwN0JRYlU3bStvRTUKTnBJeFpkZmJhYWp0Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K\n    server: https://10.0.1.184:6443\n  name: kubernetes\ncontexts:\n- context:\n    cluster: kubernetes\n    namespace: default\n    user: jenkins\n  name: jenkins\ncurrent-context: jenkins\nusers:\n- name: jenkins\n  user:\n    token: eyJhbGciOiJSUzI1NiIsImtpZCI6Il9pRzc1c1NLTHg2U3VNYUJhQVAzaWRKQ3RIRGFYdGJrSDFqZER5LTZzNFUifQ.eyJhdWQiOlsiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwiXSwiZXhwIjoxNzIxOTE1MjI1LCJpYXQiOjE3MjE4Mjg4MjUsImlzcyI6Imh0dHBzOi8va3ViZXJuZXRlcy5kZWZhdWx0LnN2Yy5jbHVzdGVyLmxvY2FsIiwianRpIjoiMTFmNjA4ZTgtOTk4NC00YTM4LWFjMjgtYzdlZjgyYzU1Njg1Iiwia3ViZXJuZXRlcy5pbyI6eyJuYW1lc3BhY2UiOiJkZWZhdWx0Iiwic2VydmljZWFjY291bnQiOnsibmFtZSI6ImplbmtpbnMiLCJ1aWQiOiJlYzhjYjM4MC02N2NhLTQzOTktOTc0Zi03YmY2NjA3ODZjYjAifX0sIm5iZiI6MTcyMTgyODgyNSwic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50OmRlZmF1bHQ6amVua2lucyJ9.HqYAYnbq3wLxR_dvinqLQk6GrB_9w0d4Ye8eFKxzy45uhyMPVv3kUvy-kJ5Gpmtl4bsMQBQQhpInT5wtRuFrdXqEFD8KJUw19NE1vLeTobKoLRMbemFQvtgbnNJAy8QrUH3MyERoiYDz4SEq3d0vZhc4iVBRilbDMWu5cNjg5KwWVh8WWzuSx2cnK58xmqyP6Wi0u478ETZ8W7jwiLJ4KvhppAh0FHpep0HoLoeTdqsNGkXiGmG1q1V1Q2M3d96NBGZ-vJ4l1U9p-rqUq6CYcRUpPWYjYM_7ufw0W6ZbOUlSvZB_LKnwb7B30a0U4SVg7ejKJZaex6KUW_pEUHVI0g\nEOF\n", "delta": "0:00:00.007611", "end": "2024-07-24 13:47:08.912839", "msg": "", "rc": 0, "start": "2024-07-24 13:47:08.905228", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}

TASK [Set master private IP globally] ******************************************
ok: [master] => {"ansible_facts": {"global_master_private_ip": "10.0.1.184"}, "changed": false}

PLAY [Fetch kubeconfig for Jenkins to local machine] ***************************

TASK [Gathering Facts] *********************************************************
ok: [localhost]

TASK [Create directory for kubeconfig] *****************************************
ok: [localhost] => {"changed": false, "gid": 1000, "group": "ec2-user", "mode": "0755", "owner": "ec2-user", "path": "/home/ec2-user/devops_setup/jenkins-docker", "secontext": "unconfined_u:object_r:user_home_t:s0", "size": 55, "state": "directory", "uid": 1000}

TASK [Fetch kubeconfig file using scp] *****************************************
changed: [localhost] => {"changed": true, "cmd": ["scp", "-i", "/home/ec2-user/.ssh/my-key-pair", "ec2-user@10.0.1.184:/tmp/kubeconfig-jenkins.yaml", "/home/ec2-user/devops_setup/jenkins-docker/kubeconfig-jenkins.yaml"], "delta": "0:00:00.304350", "end": "2024-07-24 13:47:11.122739", "msg": "", "rc": 0, "start": "2024-07-24 13:47:10.818389", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}

TASK [Export KUBECONFIG environment variable] **********************************
changed: [localhost] => {"changed": true, "cmd": "export KUBECONFIG=/home/ec2-user/devops_setup/jenkins-docker/kubeconfig-jenkins.yaml\necho \"export KUBECONFIG=/home/ec2-user/devops_setup/jenkins-docker/kubeconfig-jenkins.yaml\" >> ~/.bashrc\nsource ~/.bashrc\n", "delta": "0:00:00.044906", "end": "2024-07-24 13:47:11.441097", "msg": "", "rc": 0, "start": "2024-07-24 13:47:11.396191", "stderr": "Identity added: /home/ec2-user/.ssh/my-key-pair (tluz@Furymuse)", "stderr_lines": ["Identity added: /home/ec2-user/.ssh/my-key-pair (tluz@Furymuse)"], "stdout": "Agent pid 14582", "stdout_lines": ["Agent pid 14582"]}

PLAY RECAP *********************************************************************
localhost                  : ok=4    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
master                     : ok=17   changed=11   unreachable=0    failed=0    skipped=0    rescued=0    ignored=3   

